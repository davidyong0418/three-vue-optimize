(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-326fb30c"],{"31c8":function(e,r,t){"use strict";var o=t("5a89");void 0===o.OBJLoader2&&(o.OBJLoader2={}),void 0===o.LoaderSupport&&console.error('"THREE.LoaderSupport" is not available. "THREE.OBJLoader2" requires it. Please include "LoaderSupport.js" in your HTML.'),o.OBJLoader2=function(e){console.info("Using THREE.OBJLoader2 version: "+o.OBJLoader2.OBJLOADER2_VERSION),this.manager=o.LoaderSupport.Validator.verifyInput(e,o.DefaultLoadingManager),this.logging={enabled:!0,debug:!1},this.modelName="",this.instanceNo=0,this.path,this.resourcePath,this.useIndices=!1,this.disregardNormals=!1,this.materialPerSmoothingGroup=!1,this.useOAsMesh=!1,this.loaderRootNode=new o.Group,this.meshBuilder=new o.LoaderSupport.MeshBuilder,this.callbacks=new o.LoaderSupport.Callbacks,this.workerSupport=new o.LoaderSupport.WorkerSupport,this.terminateWorkerOnLoad=!0},o.OBJLoader2.OBJLOADER2_VERSION="2.5.0",o.OBJLoader2.prototype={constructor:o.OBJLoader2,setLogging:function(e,r){this.logging.enabled=!0===e,this.logging.debug=!0===r,this.meshBuilder.setLogging(this.logging.enabled,this.logging.debug)},setModelName:function(e){this.modelName=o.LoaderSupport.Validator.verifyInput(e,this.modelName)},setPath:function(e){this.path=o.LoaderSupport.Validator.verifyInput(e,this.path)},setResourcePath:function(e){this.resourcePath=o.LoaderSupport.Validator.verifyInput(e,this.resourcePath)},setStreamMeshesTo:function(e){this.loaderRootNode=o.LoaderSupport.Validator.verifyInput(e,this.loaderRootNode)},setMaterials:function(e){this.meshBuilder.setMaterials(e)},setUseIndices:function(e){this.useIndices=!0===e},setDisregardNormals:function(e){this.disregardNormals=!0===e},setMaterialPerSmoothingGroup:function(e){this.materialPerSmoothingGroup=!0===e},setUseOAsMesh:function(e){this.useOAsMesh=!0===e},_setCallbacks:function(e){o.LoaderSupport.Validator.isValid(e.onProgress)&&this.callbacks.setCallbackOnProgress(e.onProgress),o.LoaderSupport.Validator.isValid(e.onReportError)&&this.callbacks.setCallbackOnReportError(e.onReportError),o.LoaderSupport.Validator.isValid(e.onMeshAlter)&&this.callbacks.setCallbackOnMeshAlter(e.onMeshAlter),o.LoaderSupport.Validator.isValid(e.onLoad)&&this.callbacks.setCallbackOnLoad(e.onLoad),o.LoaderSupport.Validator.isValid(e.onLoadMaterials)&&this.callbacks.setCallbackOnLoadMaterials(e.onLoadMaterials),this.meshBuilder._setCallbacks(this.callbacks)},onProgress:function(e,r,t){var s=o.LoaderSupport.Validator.isValid(r)?r:"",a={detail:{type:e,modelName:this.modelName,instanceNo:this.instanceNo,text:s,numericalValue:t}};o.LoaderSupport.Validator.isValid(this.callbacks.onProgress)&&this.callbacks.onProgress(a),this.logging.enabled&&this.logging.debug&&console.debug(s)},_onError:function(e){var r="Error occurred while downloading!";e.currentTarget&&null!==e.currentTarget.statusText&&(r+="\nurl: "+e.currentTarget.responseURL+"\nstatus: "+e.currentTarget.statusText),this.onProgress("error",r,-1),this._throwError(r)},_throwError:function(e){if(!o.LoaderSupport.Validator.isValid(this.callbacks.onReportError))throw e;this.callbacks.onReportError(e)},load:function(e,r,t,s,a,i){var n=new o.LoaderSupport.ResourceDescriptor(e,"OBJ");this._loadObj(n,r,t,s,a,i)},_loadObj:function(e,r,t,s,a,i){var n=this;o.LoaderSupport.Validator.isValid(s)||(s=function(e){n._onError(e)}),o.LoaderSupport.Validator.isValid(e)||s("An invalid ResourceDescriptor was provided. Unable to continue!");var l=function(t){if(e.content=t,i)n.parseAsync(t,r);else{var s=new o.LoaderSupport.Callbacks;s.setCallbackOnMeshAlter(a),n._setCallbacks(s),r({detail:{loaderRootNode:n.parse(t),modelName:n.modelName,instanceNo:n.instanceNo}})}};if(this.setPath(e.path),this.setResourcePath(e.resourcePath),!o.LoaderSupport.Validator.isValid(e.url)||o.LoaderSupport.Validator.isValid(e.content))l(o.LoaderSupport.Validator.isValid(e.content)?e.content:null);else{if(!o.LoaderSupport.Validator.isValid(t)){var u=0,d=0;t=function(r){if(r.lengthComputable&&(d=r.loaded/r.total,d>u)){u=d;var t='Download of "'+e.url+'": '+(100*d).toFixed(2)+"%";n.onProgress("progressLoad",t,d)}}}var h=new o.FileLoader(this.manager);h.setPath(this.path||this.resourcePath),h.setResponseType("arraybuffer"),h.load(e.name,l,t,s)}},run:function(e,r){this._applyPrepData(e);var t=e.checkResourceDescriptorFiles(e.resources,[{ext:"obj",type:"ArrayBuffer",ignore:!1},{ext:"mtl",type:"String",ignore:!1},{ext:"zip",type:"String",ignore:!0}]);o.LoaderSupport.Validator.isValid(r)&&(this.terminateWorkerOnLoad=!1,this.workerSupport=r,this.logging.enabled=this.workerSupport.logging.enabled,this.logging.debug=this.workerSupport.logging.debug);var s=this,a=function(r){null!==r&&s.meshBuilder.setMaterials(r),s._loadObj(t.obj,s.callbacks.onLoad,null,null,s.callbacks.onMeshAlter,e.useAsync)};this._loadMtl(t.mtl,a,null,null,e.crossOrigin,e.materialOptions)},_applyPrepData:function(e){o.LoaderSupport.Validator.isValid(e)&&(this.setLogging(e.logging.enabled,e.logging.debug),this.setModelName(e.modelName),this.setStreamMeshesTo(e.streamMeshesTo),this.meshBuilder.setMaterials(e.materials),this.setUseIndices(e.useIndices),this.setDisregardNormals(e.disregardNormals),this.setMaterialPerSmoothingGroup(e.materialPerSmoothingGroup),this.setUseOAsMesh(e.useOAsMesh),this._setCallbacks(e.getCallbacks()))},parse:function(e){if(!o.LoaderSupport.Validator.isValid(e))return console.warn("Provided content is not a valid ArrayBuffer or String."),this.loaderRootNode;this.logging.enabled&&console.time("OBJLoader2 parse: "+this.modelName),this.meshBuilder.init();var r=new o.OBJLoader2.Parser;r.setLogging(this.logging.enabled,this.logging.debug),r.setMaterialPerSmoothingGroup(this.materialPerSmoothingGroup),r.setUseOAsMesh(this.useOAsMesh),r.setUseIndices(this.useIndices),r.setDisregardNormals(this.disregardNormals),r.setMaterials(this.meshBuilder.getMaterials());var t=this,s=function(e){var r,o=t.meshBuilder.processPayload(e);for(var s in o)r=o[s],t.loaderRootNode.add(r)};r.setCallbackMeshBuilder(s);var a=function(e,r){t.onProgress("progressParse",e,r)};return r.setCallbackProgress(a),e instanceof ArrayBuffer||e instanceof Uint8Array?(this.logging.enabled&&console.info("Parsing arrayBuffer..."),r.parse(e)):"string"===typeof e||e instanceof String?(this.logging.enabled&&console.info("Parsing text..."),r.parseText(e)):this._throwError("Provided content was neither of type String nor Uint8Array! Aborting..."),this.logging.enabled&&console.timeEnd("OBJLoader2 parse: "+this.modelName),this.loaderRootNode},parseAsync:function(e,r){var t=this,s=!1,a=function(){r({detail:{loaderRootNode:t.loaderRootNode,modelName:t.modelName,instanceNo:t.instanceNo}}),s&&t.logging.enabled&&console.timeEnd("OBJLoader2 parseAsync: "+t.modelName)};o.LoaderSupport.Validator.isValid(e)?s=!0:(console.warn("Provided content is not a valid ArrayBuffer."),a()),s&&this.logging.enabled&&console.time("OBJLoader2 parseAsync: "+this.modelName),this.meshBuilder.init();var i=function(e){var r,o=t.meshBuilder.processPayload(e);for(var s in o)r=o[s],t.loaderRootNode.add(r)},n=function(e){var r="";return r+="/**\n",r+="  * This code was constructed by OBJLoader2 buildCode.\n",r+="  */\n\n",r+="THREE = { LoaderSupport: {}, OBJLoader2: {} };\n\n",r+=e.serializeObject("THREE.LoaderSupport.Validator",o.LoaderSupport.Validator),r+=e.serializeClass("THREE.OBJLoader2.Parser",o.OBJLoader2.Parser),r};this.workerSupport.validate(n,"THREE.OBJLoader2.Parser"),this.workerSupport.setCallbacks(i,a),t.terminateWorkerOnLoad&&this.workerSupport.setTerminateRequested(!0);var l={},u=this.meshBuilder.getMaterials();for(var d in u)l[d]=d;this.workerSupport.run({params:{useAsync:!0,materialPerSmoothingGroup:this.materialPerSmoothingGroup,useOAsMesh:this.useOAsMesh,useIndices:this.useIndices,disregardNormals:this.disregardNormals},logging:{enabled:this.logging.enabled,debug:this.logging.debug},materials:{materials:l},data:{input:e,options:null}})},loadMtl:function(e,r,t,s,a,i,n){var l=new o.LoaderSupport.ResourceDescriptor(e,"MTL");l.setContent(r),this._loadMtl(l,t,s,a,i,n)},_loadMtl:function(e,r,t,s,a,i){void 0===o.MTLLoader&&console.error('"THREE.MTLLoader" is not available. "THREE.OBJLoader2" requires it for loading MTL files.'),o.LoaderSupport.Validator.isValid(e)&&this.logging.enabled&&console.time("Loading MTL: "+e.name);var n=[],l=this,u=function(t){var s=[];if(o.LoaderSupport.Validator.isValid(t))for(var a in t.preload(),s=t.materials,s)s.hasOwnProperty(a)&&(n[a]=s[a]);o.LoaderSupport.Validator.isValid(e)&&l.logging.enabled&&console.timeEnd("Loading MTL: "+e.name),r(n,t)};if(o.LoaderSupport.Validator.isValid(e)&&(o.LoaderSupport.Validator.isValid(e.content)||o.LoaderSupport.Validator.isValid(e.url))){var d=new o.MTLLoader(this.manager);a=o.LoaderSupport.Validator.verifyInput(a,"anonymous"),d.setCrossOrigin(a),d.setResourcePath(e.resourcePath||e.path),o.LoaderSupport.Validator.isValid(i)&&d.setMaterialOptions(i);var h=function(e){var r=e;"string"===typeof e||e instanceof String||(e.length>0||e.byteLength>0?r=o.LoaderUtils.decodeText(e):this._throwError("Unable to parse mtl as it it seems to be neither a String, an Array or an ArrayBuffer!")),u(d.parse(r))};if(o.LoaderSupport.Validator.isValid(e.content))h(e.content);else if(o.LoaderSupport.Validator.isValid(e.url)){var p=new o.FileLoader(this.manager);if(o.LoaderSupport.Validator.isValid(s)||(s=function(e){l._onError(e)}),!o.LoaderSupport.Validator.isValid(t)){var c=0,g=0;t=function(r){if(r.lengthComputable&&(g=r.loaded/r.total,g>c)){c=g;var t='Download of "'+e.url+'": '+(100*g).toFixed(2)+"%";l.onProgress("progressLoad",t,g)}}}p.load(e.url,h,t,s)}}else u()}},o.OBJLoader2.Parser=function(){this.callbackProgress=null,this.callbackMeshBuilder=null,this.contentRef=null,this.legacyMode=!1,this.materials={},this.useAsync=!1,this.materialPerSmoothingGroup=!1,this.useOAsMesh=!1,this.useIndices=!1,this.disregardNormals=!1,this.vertices=[],this.colors=[],this.normals=[],this.uvs=[],this.rawMesh={objectName:"",groupName:"",activeMtlName:"",mtllibName:"",faceType:-1,subGroups:[],subGroupInUse:null,smoothingGroup:{splitMaterials:!1,normalized:-1,real:-1},counts:{doubleIndicesCount:0,faceCount:0,mtlCount:0,smoothingGroupCount:0}},this.inputObjectCount=1,this.outputObjectCount=1,this.globalCounts={vertices:0,faces:0,doubleIndicesCount:0,lineByte:0,currentByte:0,totalBytes:0},this.logging={enabled:!0,debug:!1}},o.OBJLoader2.Parser.prototype={constructor:o.OBJLoader2.Parser,resetRawMesh:function(){this.rawMesh.subGroups=[],this.rawMesh.subGroupInUse=null,this.rawMesh.smoothingGroup.normalized=-1,this.rawMesh.smoothingGroup.real=-1,this.pushSmoothingGroup(1),this.rawMesh.counts.doubleIndicesCount=0,this.rawMesh.counts.faceCount=0,this.rawMesh.counts.mtlCount=0,this.rawMesh.counts.smoothingGroupCount=0},setUseAsync:function(e){this.useAsync=e},setMaterialPerSmoothingGroup:function(e){this.materialPerSmoothingGroup=e},setUseOAsMesh:function(e){this.useOAsMesh=e},setUseIndices:function(e){this.useIndices=e},setDisregardNormals:function(e){this.disregardNormals=e},setMaterials:function(e){this.materials=o.LoaderSupport.Validator.verifyInput(e,this.materials),this.materials=o.LoaderSupport.Validator.verifyInput(this.materials,{})},setCallbackMeshBuilder:function(e){o.LoaderSupport.Validator.isValid(e)||this._throwError('Unable to run as no "MeshBuilder" callback is set.'),this.callbackMeshBuilder=e},setCallbackProgress:function(e){this.callbackProgress=e},setLogging:function(e,r){this.logging.enabled=!0===e,this.logging.debug=!0===r},configure:function(){if(this.pushSmoothingGroup(1),this.logging.enabled){var e=Object.keys(this.materials),r=e.length>0?"\n\tmaterialNames:\n\t\t- "+e.join("\n\t\t- "):"\n\tmaterialNames: None",t="OBJLoader2.Parser configuration:"+r+"\n\tuseAsync: "+this.useAsync+"\n\tmaterialPerSmoothingGroup: "+this.materialPerSmoothingGroup+"\n\tuseOAsMesh: "+this.useOAsMesh+"\n\tuseIndices: "+this.useIndices+"\n\tdisregardNormals: "+this.disregardNormals+"\n\tcallbackMeshBuilderName: "+this.callbackMeshBuilder.name+"\n\tcallbackProgressName: "+this.callbackProgress.name;console.info(t)}},parse:function(e){this.logging.enabled&&console.time("OBJLoader2.Parser.parse"),this.configure();var r=new Uint8Array(e);this.contentRef=r;var t=r.byteLength;this.globalCounts.totalBytes=t;for(var o,s=new Array(128),a="",i=0,n=0,l=0;l<t;l++)switch(o=r[l],o){case 32:a.length>0&&(s[i++]=a),a="";break;case 47:a.length>0&&(s[i++]=a),n++,a="";break;case 10:a.length>0&&(s[i++]=a),a="",this.globalCounts.lineByte=this.globalCounts.currentByte,this.globalCounts.currentByte=l,this.processLine(s,i,n),i=0,n=0;break;case 13:break;default:a+=String.fromCharCode(o);break}this.finalizeParsing(),this.logging.enabled&&console.timeEnd("OBJLoader2.Parser.parse")},parseText:function(e){this.logging.enabled&&console.time("OBJLoader2.Parser.parseText"),this.configure(),this.legacyMode=!0,this.contentRef=e;var r=e.length;this.globalCounts.totalBytes=r;for(var t,o=new Array(128),s="",a=0,i=0,n=0;n<r;n++)switch(t=e[n],t){case" ":s.length>0&&(o[a++]=s),s="";break;case"/":s.length>0&&(o[a++]=s),i++,s="";break;case"\n":s.length>0&&(o[a++]=s),s="",this.globalCounts.lineByte=this.globalCounts.currentByte,this.globalCounts.currentByte=n,this.processLine(o,a,i),a=0,i=0;break;case"\r":break;default:s+=t}this.finalizeParsing(),this.logging.enabled&&console.timeEnd("OBJLoader2.Parser.parseText")},processLine:function(e,r,t){if(!(r<1)){var o,s,a,i,n=function(e,r,t,o){var s="";if(o>t){var a;if(r)for(a=t;a<o;a++)s+=e[a];else for(a=t;a<o;a++)s+=String.fromCharCode(e[a]);s=s.trim()}return s};switch(i=e[0],i){case"v":this.vertices.push(parseFloat(e[1])),this.vertices.push(parseFloat(e[2])),this.vertices.push(parseFloat(e[3])),r>4&&(this.colors.push(parseFloat(e[4])),this.colors.push(parseFloat(e[5])),this.colors.push(parseFloat(e[6])));break;case"vt":this.uvs.push(parseFloat(e[1])),this.uvs.push(parseFloat(e[2]));break;case"vn":this.normals.push(parseFloat(e[1])),this.normals.push(parseFloat(e[2])),this.normals.push(parseFloat(e[3]));break;case"f":if(o=r-1,0===t)for(this.checkFaceType(0),a=2,s=o;a<s;a++)this.buildFace(e[1]),this.buildFace(e[a]),this.buildFace(e[a+1]);else if(o===2*t)for(this.checkFaceType(1),a=3,s=o-2;a<s;a+=2)this.buildFace(e[1],e[2]),this.buildFace(e[a],e[a+1]),this.buildFace(e[a+2],e[a+3]);else if(2*o===3*t)for(this.checkFaceType(2),a=4,s=o-3;a<s;a+=3)this.buildFace(e[1],e[2],e[3]),this.buildFace(e[a],e[a+1],e[a+2]),this.buildFace(e[a+3],e[a+4],e[a+5]);else for(this.checkFaceType(3),a=3,s=o-2;a<s;a+=2)this.buildFace(e[1],void 0,e[2]),this.buildFace(e[a],void 0,e[a+1]),this.buildFace(e[a+2],void 0,e[a+3]);break;case"l":case"p":if(o=r-1,o===2*t)for(this.checkFaceType(4),a=1,s=o+1;a<s;a+=2)this.buildFace(e[a],e[a+1]);else for(this.checkFaceType("l"===i?5:6),a=1,s=o+1;a<s;a++)this.buildFace(e[a]);break;case"s":this.pushSmoothingGroup(e[1]);break;case"g":this.processCompletedMesh(),this.rawMesh.groupName=n(this.contentRef,this.legacyMode,this.globalCounts.lineByte+2,this.globalCounts.currentByte);break;case"o":this.useOAsMesh&&this.processCompletedMesh(),this.rawMesh.objectName=n(this.contentRef,this.legacyMode,this.globalCounts.lineByte+2,this.globalCounts.currentByte);break;case"mtllib":this.rawMesh.mtllibName=n(this.contentRef,this.legacyMode,this.globalCounts.lineByte+7,this.globalCounts.currentByte);break;case"usemtl":var l=n(this.contentRef,this.legacyMode,this.globalCounts.lineByte+7,this.globalCounts.currentByte);""!==l&&this.rawMesh.activeMtlName!==l&&(this.rawMesh.activeMtlName=l,this.rawMesh.counts.mtlCount++,this.checkSubGroup());break;default:break}}},pushSmoothingGroup:function(e){var r=parseInt(e);isNaN(r)&&(r="off"===e?0:1);var t=this.rawMesh.smoothingGroup.normalized;this.rawMesh.smoothingGroup.normalized=this.rawMesh.smoothingGroup.splitMaterials?r:0===r?0:1,this.rawMesh.smoothingGroup.real=r,t!==r&&(this.rawMesh.counts.smoothingGroupCount++,this.checkSubGroup())},checkFaceType:function(e){this.rawMesh.faceType!==e&&(this.processCompletedMesh(),this.rawMesh.faceType=e,this.checkSubGroup())},checkSubGroup:function(){var e=this.rawMesh.activeMtlName+"|"+this.rawMesh.smoothingGroup.normalized;this.rawMesh.subGroupInUse=this.rawMesh.subGroups[e],o.LoaderSupport.Validator.isValid(this.rawMesh.subGroupInUse)||(this.rawMesh.subGroupInUse={index:e,objectName:this.rawMesh.objectName,groupName:this.rawMesh.groupName,materialName:this.rawMesh.activeMtlName,smoothingGroup:this.rawMesh.smoothingGroup.normalized,vertices:[],indexMappingsCount:0,indexMappings:[],indices:[],colors:[],uvs:[],normals:[]},this.rawMesh.subGroups[e]=this.rawMesh.subGroupInUse)},buildFace:function(e,r,t){this.disregardNormals&&(t=void 0);var s=this,a=function(){var o=parseInt(e),a=3*(o>0?o-1:o+s.vertices.length/3),i=s.colors.length>0?a:null,n=s.rawMesh.subGroupInUse.vertices;if(n.push(s.vertices[a++]),n.push(s.vertices[a++]),n.push(s.vertices[a]),null!==i){var l=s.rawMesh.subGroupInUse.colors;l.push(s.colors[i++]),l.push(s.colors[i++]),l.push(s.colors[i])}if(r){var u=parseInt(r),d=2*(u>0?u-1:u+s.uvs.length/2),h=s.rawMesh.subGroupInUse.uvs;h.push(s.uvs[d++]),h.push(s.uvs[d])}if(t){var p=parseInt(t),c=3*(p>0?p-1:p+s.normals.length/3),g=s.rawMesh.subGroupInUse.normals;g.push(s.normals[c++]),g.push(s.normals[c++]),g.push(s.normals[c])}};if(this.useIndices){var i=e+(r?"_"+r:"_n")+(t?"_"+t:"_n"),n=this.rawMesh.subGroupInUse.indexMappings[i];o.LoaderSupport.Validator.isValid(n)?this.rawMesh.counts.doubleIndicesCount++:(n=this.rawMesh.subGroupInUse.vertices.length/3,a(),this.rawMesh.subGroupInUse.indexMappings[i]=n,this.rawMesh.subGroupInUse.indexMappingsCount++),this.rawMesh.subGroupInUse.indices.push(n)}else a();this.rawMesh.counts.faceCount++},createRawMeshReport:function(e){return"Input Object number: "+e+"\n\tObject name: "+this.rawMesh.objectName+"\n\tGroup name: "+this.rawMesh.groupName+"\n\tMtllib name: "+this.rawMesh.mtllibName+"\n\tVertex count: "+this.vertices.length/3+"\n\tNormal count: "+this.normals.length/3+"\n\tUV count: "+this.uvs.length/2+"\n\tSmoothingGroup count: "+this.rawMesh.counts.smoothingGroupCount+"\n\tMaterial count: "+this.rawMesh.counts.mtlCount+"\n\tReal MeshOutputGroup count: "+this.rawMesh.subGroups.length},finalizeRawMesh:function(){var e,r,t=[],o=0,s=0,a=0,i=0,n=0,l=0;for(var u in this.rawMesh.subGroups)if(e=this.rawMesh.subGroups[u],e.vertices.length>0){if(r=e.indices,r.length>0&&s>0)for(var d in r)r[d]=r[d]+s;t.push(e),o+=e.vertices.length,s+=e.indexMappingsCount,a+=e.indices.length,i+=e.colors.length,l+=e.uvs.length,n+=e.normals.length}var h=null;return t.length>0&&(h={name:""!==this.rawMesh.groupName?this.rawMesh.groupName:this.rawMesh.objectName,subGroups:t,absoluteVertexCount:o,absoluteIndexCount:a,absoluteColorCount:i,absoluteNormalCount:n,absoluteUvCount:l,faceCount:this.rawMesh.counts.faceCount,doubleIndicesCount:this.rawMesh.counts.doubleIndicesCount}),h},processCompletedMesh:function(){var e=this.finalizeRawMesh();if(o.LoaderSupport.Validator.isValid(e)){this.colors.length>0&&this.colors.length!==this.vertices.length&&this._throwError("Vertex Colors were detected, but vertex count and color count do not match!"),this.logging.enabled&&this.logging.debug&&console.debug(this.createRawMeshReport(this.inputObjectCount)),this.inputObjectCount++,this.buildMesh(e);var r=this.globalCounts.currentByte/this.globalCounts.totalBytes;return this.callbackProgress("Completed [o: "+this.rawMesh.objectName+" g:"+this.rawMesh.groupName+"] Total progress: "+(100*r).toFixed(2)+"%",r),this.resetRawMesh(),!0}return!1},buildMesh:function(e){var r=e.subGroups,t=new Float32Array(e.absoluteVertexCount);this.globalCounts.vertices+=e.absoluteVertexCount/3,this.globalCounts.faces+=e.faceCount,this.globalCounts.doubleIndicesCount+=e.doubleIndicesCount;var s,a,i,n,l,u,d,h=e.absoluteIndexCount>0?new Uint32Array(e.absoluteIndexCount):null,p=e.absoluteColorCount>0?new Float32Array(e.absoluteColorCount):null,c=e.absoluteNormalCount>0?new Float32Array(e.absoluteNormalCount):null,g=e.absoluteUvCount>0?new Float32Array(e.absoluteUvCount):null,f=o.LoaderSupport.Validator.isValid(p),m=[],b=r.length>1,E=0,k=[],L=[],R=0,S=0,v=0,M=0,w=0,y=0,T=0;for(var V in r)if(r.hasOwnProperty(V)){if(s=r[V],d=s.materialName,u=this.rawMesh.faceType<4?d+(f?"_vertexColor":"")+(0===s.smoothingGroup?"_flat":""):6===this.rawMesh.faceType?"defaultPointMaterial":"defaultLineMaterial",n=this.materials[d],l=this.materials[u],!o.LoaderSupport.Validator.isValid(n)&&!o.LoaderSupport.Validator.isValid(l)){var C=f?"defaultVertexColorMaterial":"defaultMaterial";n=this.materials[C],this.logging.enabled&&console.warn('object_group "'+s.objectName+"_"+s.groupName+'" was defined with unresolvable material "'+d+'"! Assigning "'+C+'".'),d=C,d===u&&(l=n,u=C)}if(!o.LoaderSupport.Validator.isValid(l)){var N={materialNameOrg:d,materialName:u,materialProperties:{vertexColors:f?2:0,flatShading:0===s.smoothingGroup}},O={cmd:"materialData",materials:{materialCloneInstructions:N}};this.callbackMeshBuilder(O),this.useAsync&&(this.materials[u]=N)}if(b?(a=k[u],a||(a=E,k[u]=E,m.push(u),E++),T=this.useIndices?s.indices.length:s.vertices.length/3,i={start:y,count:T,index:a},L.push(i),y+=T):m.push(u),t.set(s.vertices,R),R+=s.vertices.length,h&&(h.set(s.indices,S),S+=s.indices.length),p&&(p.set(s.colors,v),v+=s.colors.length),c&&(c.set(s.normals,M),M+=s.normals.length),g&&(g.set(s.uvs,w),w+=s.uvs.length),this.logging.enabled&&this.logging.debug){var H=o.LoaderSupport.Validator.isValid(a)?"\n\t\tmaterialIndex: "+a:"",W="\tOutput Object no.: "+this.outputObjectCount+"\n\t\tgroupName: "+s.groupName+"\n\t\tIndex: "+s.index+"\n\t\tfaceType: "+this.rawMesh.faceType+"\n\t\tmaterialName: "+s.materialName+"\n\t\tsmoothingGroup: "+s.smoothingGroup+H+"\n\t\tobjectName: "+s.objectName+"\n\t\t#vertices: "+s.vertices.length/3+"\n\t\t#indices: "+s.indices.length+"\n\t\t#colors: "+s.colors.length/3+"\n\t\t#uvs: "+s.uvs.length/2+"\n\t\t#normals: "+s.normals.length/3;console.debug(W)}}this.outputObjectCount++,this.callbackMeshBuilder({cmd:"meshData",progress:{numericalValue:this.globalCounts.currentByte/this.globalCounts.totalBytes},params:{meshName:e.name},materials:{multiMaterial:b,materialNames:m,materialGroups:L},buffers:{vertices:t,indices:h,colors:p,normals:c,uvs:g},geometryType:this.rawMesh.faceType<4?0:6===this.rawMesh.faceType?2:1},[t.buffer],o.LoaderSupport.Validator.isValid(h)?[h.buffer]:null,o.LoaderSupport.Validator.isValid(p)?[p.buffer]:null,o.LoaderSupport.Validator.isValid(c)?[c.buffer]:null,o.LoaderSupport.Validator.isValid(g)?[g.buffer]:null)},finalizeParsing:function(){if(this.logging.enabled&&console.info("Global output object count: "+this.outputObjectCount),this.processCompletedMesh()&&this.logging.enabled){var e="Overall counts: \n\tVertices: "+this.globalCounts.vertices+"\n\tFaces: "+this.globalCounts.faces+"\n\tMultiple definitions: "+this.globalCounts.doubleIndicesCount;console.info(e)}}},e.exports={OBJLoader2:o.OBJLoader2}},"74b5":function(module,exports,__webpack_require__){"use strict";var THREE=__webpack_require__("5a89");void 0===THREE.LoaderSupport&&(THREE.LoaderSupport={}),THREE.LoaderSupport.Validator={isValid:function(e){return null!==e&&void 0!==e},verifyInput:function(e,r){return null===e||void 0===e?r:e}},THREE.LoaderSupport.Callbacks=function(){this.onProgress=null,this.onReportError=null,this.onMeshAlter=null,this.onLoad=null,this.onLoadMaterials=null},THREE.LoaderSupport.Callbacks.prototype={constructor:THREE.LoaderSupport.Callbacks,setCallbackOnProgress:function(e){this.onProgress=THREE.LoaderSupport.Validator.verifyInput(e,this.onProgress)},setCallbackOnReportError:function(e){this.onReportError=THREE.LoaderSupport.Validator.verifyInput(e,this.onReportError)},setCallbackOnMeshAlter:function(e){this.onMeshAlter=THREE.LoaderSupport.Validator.verifyInput(e,this.onMeshAlter)},setCallbackOnLoad:function(e){this.onLoad=THREE.LoaderSupport.Validator.verifyInput(e,this.onLoad)},setCallbackOnLoadMaterials:function(e){this.onLoadMaterials=THREE.LoaderSupport.Validator.verifyInput(e,this.onLoadMaterials)}},THREE.LoaderSupport.LoadedMeshUserOverride=function(e,r){this.disregardMesh=!0===e,this.alteredMesh=!0===r,this.meshes=[]},THREE.LoaderSupport.LoadedMeshUserOverride.prototype={constructor:THREE.LoaderSupport.LoadedMeshUserOverride,addMesh:function(e){this.meshes.push(e),this.alteredMesh=!0},isDisregardMesh:function(){return this.disregardMesh},providesAlteredMeshes:function(){return this.alteredMesh}},THREE.LoaderSupport.ResourceDescriptor=function(e,r){var t=e.split("/");this.path,this.resourcePath,this.name=e,this.url=e,t.length>=2&&(this.path=THREE.LoaderSupport.Validator.verifyInput(t.slice(0,t.length-1).join("/")+"/",this.path),this.name=t[t.length-1],this.url=e),this.name=THREE.LoaderSupport.Validator.verifyInput(this.name,"Unnamed_Resource"),this.extension=THREE.LoaderSupport.Validator.verifyInput(r,"default"),this.extension=this.extension.trim(),this.content=null},THREE.LoaderSupport.ResourceDescriptor.prototype={constructor:THREE.LoaderSupport.ResourceDescriptor,setContent:function(e){this.content=THREE.LoaderSupport.Validator.verifyInput(e,null)},setResourcePath:function(e){this.resourcePath=THREE.LoaderSupport.Validator.verifyInput(e,this.resourcePath)}},THREE.LoaderSupport.PrepData=function(e){this.logging={enabled:!0,debug:!1},this.modelName=THREE.LoaderSupport.Validator.verifyInput(e,""),this.resources=[],this.callbacks=new THREE.LoaderSupport.Callbacks},THREE.LoaderSupport.PrepData.prototype={constructor:THREE.LoaderSupport.PrepData,setLogging:function(e,r){this.logging.enabled=!0===e,this.logging.debug=!0===r},getCallbacks:function(){return this.callbacks},addResource:function(e){this.resources.push(e)},clone:function(){var e,r,t=new THREE.LoaderSupport.PrepData(this.modelName);for(e in t.logging.enabled=this.logging.enabled,t.logging.debug=this.logging.debug,t.resources=this.resources,t.callbacks=this.callbacks,this)r=this[e],t.hasOwnProperty(e)||"function"===typeof this[e]||(t[e]=r);return t},checkResourceDescriptorFiles:function(e,r){var t,o,s,a,i={};for(var n in e)if(t=e[n],a=!1,THREE.LoaderSupport.Validator.isValid(t.name))if(THREE.LoaderSupport.Validator.isValid(t.content)){for(s=0;s<r.length&&!a;s++)if(o=r[s],t.extension.toLowerCase()===o.ext.toLowerCase())if(o.ignore)a=!0;else if("ArrayBuffer"===o.type){if(!(t.content instanceof ArrayBuffer||t.content instanceof Uint8Array))throw"Provided content is not of type ArrayBuffer! Aborting...";i[o.ext]=t,a=!0}else if("String"===o.type){if(!("string"===typeof t.content||t.content instanceof String))throw"Provided  content is not of type String! Aborting...";i[o.ext]=t,a=!0}if(!a)throw'Unidentified resource "'+t.name+'": '+t.url}else{if(!("string"===typeof t.name||t.name instanceof String))throw"Provided file is not properly defined! Aborting...";for(s=0;s<r.length&&!a;s++)o=r[s],t.extension.toLowerCase()===o.ext.toLowerCase()&&(o.ignore||(i[o.ext]=t),a=!0);if(!a)throw'Unidentified resource "'+t.name+'": '+t.url}return i}},THREE.LoaderSupport.MeshBuilder=function(){console.info("Using THREE.LoaderSupport.MeshBuilder version: "+THREE.LoaderSupport.MeshBuilder.LOADER_MESH_BUILDER_VERSION),this.validator=THREE.LoaderSupport.Validator,this.logging={enabled:!0,debug:!1},this.callbacks=new THREE.LoaderSupport.Callbacks,this.materials=[]},THREE.LoaderSupport.MeshBuilder.LOADER_MESH_BUILDER_VERSION="1.3.0",THREE.LoaderSupport.MeshBuilder.prototype={constructor:THREE.LoaderSupport.MeshBuilder,setLogging:function(e,r){this.logging.enabled=!0===e,this.logging.debug=!0===r},init:function(){var e=new THREE.MeshStandardMaterial({color:14479871});e.name="defaultMaterial";var r=new THREE.MeshStandardMaterial({color:14479871});r.name="defaultVertexColorMaterial",r.vertexColors=THREE.VertexColors;var t=new THREE.LineBasicMaterial;t.name="defaultLineMaterial";var o=new THREE.PointsMaterial({size:1});o.name="defaultPointMaterial";var s={};s[e.name]=e,s[r.name]=r,s[t.name]=t,s[o.name]=o,this.updateMaterials({cmd:"materialData",materials:{materialCloneInstructions:null,serializedMaterials:null,runtimeMaterials:s}})},setMaterials:function(e){var r={cmd:"materialData",materials:{materialCloneInstructions:null,serializedMaterials:null,runtimeMaterials:this.validator.isValid(this.callbacks.onLoadMaterials)?this.callbacks.onLoadMaterials(e):e}};this.updateMaterials(r)},_setCallbacks:function(e){this.validator.isValid(e.onProgress)&&this.callbacks.setCallbackOnProgress(e.onProgress),this.validator.isValid(e.onReportError)&&this.callbacks.setCallbackOnReportError(e.onReportError),this.validator.isValid(e.onMeshAlter)&&this.callbacks.setCallbackOnMeshAlter(e.onMeshAlter),this.validator.isValid(e.onLoad)&&this.callbacks.setCallbackOnLoad(e.onLoad),this.validator.isValid(e.onLoadMaterials)&&this.callbacks.setCallbackOnLoadMaterials(e.onLoadMaterials)},processPayload:function(e){return"meshData"===e.cmd?this.buildMeshes(e):"materialData"===e.cmd?(this.updateMaterials(e),null):void 0},buildMeshes:function(e){var r=e.params.meshName,t=new THREE.BufferGeometry;t.addAttribute("position",new THREE.BufferAttribute(new Float32Array(e.buffers.vertices),3)),this.validator.isValid(e.buffers.indices)&&t.setIndex(new THREE.BufferAttribute(new Uint32Array(e.buffers.indices),1));var o,s,a,i=this.validator.isValid(e.buffers.colors);i&&t.addAttribute("color",new THREE.BufferAttribute(new Float32Array(e.buffers.colors),3)),this.validator.isValid(e.buffers.normals)?t.addAttribute("normal",new THREE.BufferAttribute(new Float32Array(e.buffers.normals),3)):t.computeVertexNormals(),this.validator.isValid(e.buffers.uvs)&&t.addAttribute("uv",new THREE.BufferAttribute(new Float32Array(e.buffers.uvs),2));var n=e.materials.materialNames,l=e.materials.multiMaterial,u=[];for(a in n)s=n[a],o=this.materials[s],l&&u.push(o);if(l){o=u;var d,h=e.materials.materialGroups;for(a in h)d=h[a],t.addGroup(d.start,d.count,d.index)}var p,c,g,f=[],m=this.callbacks.onMeshAlter,b=!0,E=this.validator.verifyInput(e.geometryType,0);if(this.validator.isValid(m)&&(c=m({detail:{meshName:r,bufferGeometry:t,material:o,geometryType:E}}),this.validator.isValid(c)))if(c.isDisregardMesh())b=!1;else if(c.providesAlteredMeshes()){for(var k in c.meshes)f.push(c.meshes[k]);b=!1}if(b&&(e.computeBoundingSphere&&t.computeBoundingSphere(),p=0===E?new THREE.Mesh(t,o):1===E?new THREE.LineSegments(t,o):new THREE.Points(t,o),p.name=r,f.push(p)),this.validator.isValid(f)&&f.length>0){var L=[];for(var k in f)p=f[k],L[k]=p.name;g="Adding mesh(es) ("+L.length+": "+L+") from input mesh: "+r,g+=" ("+(100*e.progress.numericalValue).toFixed(2)+"%)"}else g="Not adding mesh: "+r,g+=" ("+(100*e.progress.numericalValue).toFixed(2)+"%)";var R=this.callbacks.onProgress;if(this.validator.isValid(R)){var S=new CustomEvent("MeshBuilderEvent",{detail:{type:"progress",modelName:e.params.meshName,text:g,numericalValue:e.progress.numericalValue}});R(S)}return f},updateMaterials:function(e){var r,t,o=e.materials.materialCloneInstructions;if(this.validator.isValid(o)){var s=o.materialNameOrg,a=this.materials[s];if(this.validator.isValid(s)){r=a.clone(),t=o.materialName,r.name=t;var i=o.materialProperties;for(var n in i)r.hasOwnProperty(n)&&i.hasOwnProperty(n)&&(r[n]=i[n]);this.materials[t]=r}else console.warn('Requested material "'+s+'" is not available!')}var l=e.materials.serializedMaterials;if(this.validator.isValid(l)&&Object.keys(l).length>0){var u,d=new THREE.MaterialLoader;for(t in l)u=l[t],this.validator.isValid(u)&&(r=d.parse(u),this.logging.enabled&&console.info('De-serialized material with name "'+t+'" will be added.'),this.materials[t]=r)}if(l=e.materials.runtimeMaterials,this.validator.isValid(l)&&Object.keys(l).length>0)for(t in l)r=l[t],this.logging.enabled&&console.info('Material with name "'+t+'" will be added.'),this.materials[t]=r},getMaterialsJSON:function(){var e,r={};for(var t in this.materials)e=this.materials[t],r[t]=e.toJSON();return r},getMaterials:function(){return this.materials}},THREE.LoaderSupport.WorkerSupport=function(){console.info("Using THREE.LoaderSupport.WorkerSupport version: "+THREE.LoaderSupport.WorkerSupport.WORKER_SUPPORT_VERSION),this.logging={enabled:!0,debug:!1},this.loaderWorker="undefined"!==typeof window?new THREE.LoaderSupport.WorkerSupport.LoaderWorker:new THREE.LoaderSupport.WorkerSupport.NodeLoaderWorker},THREE.LoaderSupport.WorkerSupport.WORKER_SUPPORT_VERSION="2.3.0",THREE.LoaderSupport.WorkerSupport.prototype={constructor:THREE.LoaderSupport.WorkerSupport,setLogging:function(e,r){this.logging.enabled=!0===e,this.logging.debug=!0===r,this.loaderWorker.setLogging(this.logging.enabled,this.logging.debug)},setForceWorkerDataCopy:function(e){this.loaderWorker.setForceCopy(e)},validate:function(e,r,t,o,s){if(!THREE.LoaderSupport.Validator.isValid(this.loaderWorker.worker)){this.logging.enabled&&(console.info("WorkerSupport: Building worker code..."),console.time("buildWebWorkerCode")),THREE.LoaderSupport.Validator.isValid(s)?this.logging.enabled&&console.info('WorkerSupport: Using "'+s.runnerName+'" as Runner class for worker.'):"undefined"!==typeof window?(s=THREE.LoaderSupport.WorkerRunnerRefImpl,this.logging.enabled&&console.info('WorkerSupport: Using DEFAULT "THREE.LoaderSupport.WorkerRunnerRefImpl" as Runner class for worker.')):(s=THREE.LoaderSupport.NodeWorkerRunnerRefImpl,this.logging.enabled&&console.info('WorkerSupport: Using DEFAULT "THREE.LoaderSupport.NodeWorkerRunnerRefImpl" as Runner class for worker.'));var a=e(THREE.LoaderSupport.WorkerSupport.CodeSerializer);a+="var Parser = "+r+";\n\n",a+=THREE.LoaderSupport.WorkerSupport.CodeSerializer.serializeClass(s.runnerName,s),a+="new "+s.runnerName+"();\n\n";var i=this;if(THREE.LoaderSupport.Validator.isValid(t)&&t.length>0){var n="",l=function(e,r){if(0===r.length)i.loaderWorker.initWorker(n+a,s.runnerName),i.logging.enabled&&console.timeEnd("buildWebWorkerCode");else{var t=function(t){n+=t,l(e,r)},o=new THREE.FileLoader;o.setPath(e),o.setResponseType("text"),o.load(r[0],t),r.shift()}};l(o,t)}else this.loaderWorker.initWorker(a,s.runnerName),this.logging.enabled&&console.timeEnd("buildWebWorkerCode")}},setCallbacks:function(e,r){this.loaderWorker.setCallbacks(e,r)},run:function(e){this.loaderWorker.run(e)},setTerminateRequested:function(e){this.loaderWorker.setTerminateRequested(e)}},THREE.LoaderSupport.WorkerSupport.LoaderWorker=function(){this._reset()},THREE.LoaderSupport.WorkerSupport.LoaderWorker.prototype={constructor:THREE.LoaderSupport.WorkerSupport.LoaderWorker,_reset:function(){this.logging={enabled:!0,debug:!1},this.worker=null,this.runnerImplName=null,this.callbacks={meshBuilder:null,onLoad:null},this.terminateRequested=!1,this.queuedMessage=null,this.started=!1,this.forceCopy=!1},checkSupport:function(){return void 0===window.Worker?"This browser does not support web workers!":void 0===window.Blob?"This browser does not support Blob!":"function"!==typeof window.URL.createObjectURL?"This browser does not support Object creation from URL!":void 0},setLogging:function(e,r){this.logging.enabled=!0===e,this.logging.debug=!0===r},setForceCopy:function(e){this.forceCopy=!0===e},initWorker:function(e,r){var t=this.checkSupport();if(t)throw t;this.runnerImplName=r;var o=new Blob([e],{type:"application/javascript"});this.worker=new Worker(window.URL.createObjectURL(o)),this.worker.onmessage=this._receiveWorkerMessage,this.worker.runtimeRef=this,this._postMessage()},_receiveWorkerMessage:function(e){var r=e.data;switch(r.cmd){case"meshData":case"materialData":case"imageData":this.runtimeRef.callbacks.meshBuilder(r);break;case"complete":this.runtimeRef.queuedMessage=null,this.started=!1,this.runtimeRef.callbacks.onLoad(r.msg),this.runtimeRef.terminateRequested&&(this.runtimeRef.logging.enabled&&console.info("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Run is complete. Terminating application on request!"),this.runtimeRef._terminate());break;case"error":console.error("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Reported error: "+r.msg),this.runtimeRef.queuedMessage=null,this.started=!1,this.runtimeRef.callbacks.onLoad(r.msg),this.runtimeRef.terminateRequested&&(this.runtimeRef.logging.enabled&&console.info("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Run reported error. Terminating application on request!"),this.runtimeRef._terminate());break;default:console.error("WorkerSupport ["+this.runtimeRef.runnerImplName+"]: Received unknown command: "+r.cmd);break}},setCallbacks:function(e,r){this.callbacks.meshBuilder=THREE.LoaderSupport.Validator.verifyInput(e,this.callbacks.meshBuilder),this.callbacks.onLoad=THREE.LoaderSupport.Validator.verifyInput(r,this.callbacks.onLoad)},run:function(e){if(THREE.LoaderSupport.Validator.isValid(this.queuedMessage))console.warn("Already processing message. Rejecting new run instruction");else{if(this.queuedMessage=e,this.started=!0,!THREE.LoaderSupport.Validator.isValid(this.callbacks.meshBuilder))throw'Unable to run as no "MeshBuilder" callback is set.';if(!THREE.LoaderSupport.Validator.isValid(this.callbacks.onLoad))throw'Unable to run as no "onLoad" callback is set.';"run"!==e.cmd&&(e.cmd="run"),THREE.LoaderSupport.Validator.isValid(e.logging)?(e.logging.enabled=!0===e.logging.enabled,e.logging.debug=!0===e.logging.debug):e.logging={enabled:!0,debug:!1},this._postMessage()}},_postMessage:function(){var e;THREE.LoaderSupport.Validator.isValid(this.queuedMessage)&&THREE.LoaderSupport.Validator.isValid(this.worker)&&(this.queuedMessage.data.input instanceof ArrayBuffer?(e=this.forceCopy?this.queuedMessage.data.input.slice(0):this.queuedMessage.data.input,this.worker.postMessage(this.queuedMessage,[e])):this.worker.postMessage(this.queuedMessage))},setTerminateRequested:function(e){this.terminateRequested=!0===e,this.terminateRequested&&THREE.LoaderSupport.Validator.isValid(this.worker)&&!THREE.LoaderSupport.Validator.isValid(this.queuedMessage)&&this.started&&(this.logging.enabled&&console.info("Worker is terminated immediately as it is not running!"),this._terminate())},_terminate:function(){this.worker.terminate(),this._reset()}},THREE.LoaderSupport.WorkerSupport.CodeSerializer={serializeObject:function(e,r){var t,o=e+" = {\n\n";for(var s in r)t=r[s],"string"===typeof t||t instanceof String?(t=t.replace("\n","\\n"),t=t.replace("\r","\\r"),o+="\t"+s+': "'+t+'",\n'):t instanceof Array?o+="\t"+s+": ["+t+"],\n":o+="object"===typeof t?"\t"+s+": {},\n":"\t"+s+": "+t+",\n";return o+="}\n\n",o},serializeClass:function(e,r,t,o,s,a,i){var n,l,u,d,h,p=[],c=[],g=[],f=null!==o&&void 0!==o;for(var m in Array.isArray(s)||(s=[]),Array.isArray(a)||(a=null),Array.isArray(i)||(i=[]),r.prototype)l=r.prototype[m],n=l.toString(),"constructor"===m?u=e+" = "+n+";\n\n":"function"===typeof l&&s.indexOf(m)<0&&(null===a||a.indexOf(m)>=0)&&(h=i[m],h&&h.fullName===e+".prototype."+m&&(n=h.code),f?p.push(e+".prototype."+m+" = "+n+";\n\n"):p.push("\t"+m+": "+n+",\n\n"));for(var m in r)l=r[m],"function"===typeof l?s.indexOf(m)<0&&(null===a||a.indexOf(m)>=0)&&(h=i[m],n=h&&h.fullName===e+"."+m?h.code:l.toString(),g.push(e+"."+m+" = "+n+";\n\n")):(n="string"===typeof l||l instanceof String?'"'+l.toString()+'"':"object"===typeof l?"{}":l,c.push(e+"."+m+" = "+n+";\n"));void 0!==u&&null!==u||"function"!==typeof r.prototype.constructor||(u=e+" = "+r.prototype.constructor.toString().replace(t,""));var b=u+"\n\n";for(f&&(b+=e+".prototype = Object.create( "+o+".prototype );\n"),b+=e+".prototype.constructor = "+e+";\n",b+="\n\n",d=0;d<c.length;d++)b+=c[d];for(b+="\n\n",d=0;d<g.length;d++)b+=g[d];if(b+="\n\n",f)for(d=0;d<p.length;d++)b+=p[d];else{for(b+=e+".prototype = {\n\n",d=0;d<p.length;d++)b+=p[d];b+="\n};"}return b+="\n\n",b}},THREE.LoaderSupport.WorkerRunnerRefImpl=function(){var e=function(e){this.processMessage(e.data)};this.getParentScope().addEventListener("message",e.bind(this))},THREE.LoaderSupport.WorkerRunnerRefImpl.runnerName="THREE.LoaderSupport.WorkerRunnerRefImpl",THREE.LoaderSupport.WorkerRunnerRefImpl.prototype={constructor:THREE.LoaderSupport.WorkerRunnerRefImpl,getParentScope:function(){return self},applyProperties:function(e,r){var t,o,s;for(t in r)o="set"+t.substring(0,1).toLocaleUpperCase()+t.substring(1),s=r[t],"function"===typeof e[o]?e[o](s):e.hasOwnProperty(t)&&(e[t]=s)},processMessage:function(e){if("run"===e.cmd){var r=this.getParentScope(),t={callbackMeshBuilder:function(e){r.postMessage(e)},callbackProgress:function(r){e.logging.enabled&&e.logging.debug&&console.debug("WorkerRunner: progress: "+r)}},o=new Parser;"function"===typeof o["setLogging"]&&o.setLogging(e.logging.enabled,e.logging.debug),this.applyProperties(o,e.params),this.applyProperties(o,e.materials),this.applyProperties(o,t),o.workerScope=r,o.parse(e.data.input,e.data.options),e.logging.enabled&&console.log("WorkerRunner: Run complete!"),t.callbackMeshBuilder({cmd:"complete",msg:"WorkerRunner completed run."})}else console.error("WorkerRunner: Received unknown command: "+e.cmd)}},THREE.LoaderSupport.NodeWorkerRunnerRefImpl=function(){this.runnerName="THREE.LoaderSupport.NodeWorkerRunnerRefImpl",this.getParentScope().onmessage=this.processMessage.bind(this)},THREE.LoaderSupport.NodeWorkerRunnerRefImpl.prototype=Object.create(THREE.LoaderSupport.WorkerRunnerRefImpl.prototype),THREE.LoaderSupport.NodeWorkerRunnerRefImpl.prototype.constructor=THREE.LoaderSupport.NodeWorkerRunnerRefImpl,THREE.LoaderSupport.NodeWorkerRunnerRefImpl.runnerName="THREE.LoaderSupport.NodeWorkerRunnerRefImpl",THREE.LoaderSupport.NodeWorkerRunnerRefImpl.prototype={getParentScope:function(){var _require=eval("require");return _require("worker_threads").parentPort}},THREE.LoaderSupport.WorkerSupport.NodeLoaderWorker=function(){THREE.LoaderSupport.WorkerSupport.LoaderWorker.call(this)},THREE.LoaderSupport.WorkerSupport.NodeLoaderWorker.prototype=Object.create(THREE.LoaderSupport.WorkerSupport.LoaderWorker.prototype),THREE.LoaderSupport.WorkerSupport.NodeLoaderWorker.prototype.constructor=THREE.LoaderSupport.WorkerSupport.NodeLoaderWorker,THREE.LoaderSupport.WorkerSupport.NodeLoaderWorker.checkSupport=function(){try{var _require=eval("require");_require.resolve("worker_threads")}catch(e){return"This version of Node does not support web workers!"}},THREE.LoaderSupport.WorkerSupport.NodeLoaderWorker.prototype.initWorker=function(code,runnerImplName){var supportError=this.checkSupport();if(supportError)throw supportError;this.runnerImplName=runnerImplName;var _require=eval("require"),Worker=_require("worker_threads").Worker;this.worker=new Worker(code,{eval:!0}),this.worker.onmessage=this._receiveWorkerMessage,this.worker.runtimeRef=this,this._postMessage()},THREE.LoaderSupport.WorkerDirector=function(e){if(console.info("Using THREE.LoaderSupport.WorkerDirector version: "+THREE.LoaderSupport.WorkerDirector.LOADER_WORKER_DIRECTOR_VERSION),this.logging={enabled:!0,debug:!1},this.maxQueueSize=THREE.LoaderSupport.WorkerDirector.MAX_QUEUE_SIZE,this.maxWebWorkers=THREE.LoaderSupport.WorkerDirector.MAX_WEB_WORKER,this.crossOrigin=null,!THREE.LoaderSupport.Validator.isValid(e))throw"Provided invalid classDef: "+e;this.workerDescription={classDef:e,globalCallbacks:{},workerSupports:{},forceWorkerDataCopy:!0},this.objectsCompleted=0,this.instructionQueue=[],this.instructionQueuePointer=0,this.callbackOnFinishedProcessing=null},THREE.LoaderSupport.WorkerDirector.LOADER_WORKER_DIRECTOR_VERSION="2.3.0",THREE.LoaderSupport.WorkerDirector.MAX_WEB_WORKER=16,THREE.LoaderSupport.WorkerDirector.MAX_QUEUE_SIZE=2048,THREE.LoaderSupport.WorkerDirector.prototype={constructor:THREE.LoaderSupport.WorkerDirector,setLogging:function(e,r){this.logging.enabled=!0===e,this.logging.debug=!0===r},getMaxQueueSize:function(){return this.maxQueueSize},getMaxWebWorkers:function(){return this.maxWebWorkers},setCrossOrigin:function(e){this.crossOrigin=e},setForceWorkerDataCopy:function(e){this.workerDescription.forceWorkerDataCopy=!0===e},prepareWorkers:function(e,r,t){THREE.LoaderSupport.Validator.isValid(e)&&(this.workerDescription.globalCallbacks=e),this.maxQueueSize=Math.min(r,THREE.LoaderSupport.WorkerDirector.MAX_QUEUE_SIZE),this.maxWebWorkers=Math.min(t,THREE.LoaderSupport.WorkerDirector.MAX_WEB_WORKER),this.maxWebWorkers=Math.min(this.maxWebWorkers,this.maxQueueSize),this.objectsCompleted=0,this.instructionQueue=[],this.instructionQueuePointer=0;for(var o=0;o<this.maxWebWorkers;o++){var s=new THREE.LoaderSupport.WorkerSupport;s.setLogging(this.logging.enabled,this.logging.debug),s.setForceWorkerDataCopy(this.workerDescription.forceWorkerDataCopy),this.workerDescription.workerSupports[o]={instanceNo:o,inUse:!1,terminateRequested:!1,workerSupport:s,loader:null}}},enqueueForRun:function(e){this.instructionQueue.length<this.maxQueueSize&&this.instructionQueue.push(e)},isRunning:function(){var e=Object.keys(this.workerDescription.workerSupports);return this.instructionQueue.length>0&&this.instructionQueuePointer<this.instructionQueue.length||e.length>0},processQueue:function(){var e,r;for(var t in this.workerDescription.workerSupports)r=this.workerDescription.workerSupports[t],r.inUse||(this.instructionQueuePointer<this.instructionQueue.length?(e=this.instructionQueue[this.instructionQueuePointer],this._kickWorkerRun(e,r),this.instructionQueuePointer++):this._deregister(r));this.isRunning()||null===this.callbackOnFinishedProcessing||(this.callbackOnFinishedProcessing(),this.callbackOnFinishedProcessing=null)},_kickWorkerRun:function(e,r){r.inUse=!0,r.workerSupport.setTerminateRequested(r.terminateRequested),this.logging.enabled&&console.info("\nAssigning next item from queue to worker (queue length: "+this.instructionQueue.length+")\n\n");var t=THREE.LoaderSupport.Validator,o=this,s=e.getCallbacks(),a=this.workerDescription.globalCallbacks,i=function(e){t.isValid(a.onLoad)&&a.onLoad(e),t.isValid(s.onLoad)&&s.onLoad(e),o.objectsCompleted++,r.inUse=!1,o.processQueue()},n=function(e){t.isValid(a.onProgress)&&a.onProgress(e),t.isValid(s.onProgress)&&s.onProgress(e)},l=function(e,r){return t.isValid(a.onMeshAlter)&&(r=a.onMeshAlter(e,r)),t.isValid(s.onMeshAlter)&&(r=a.onMeshAlter(e,r)),r},u=function(e){return t.isValid(a.onLoadMaterials)&&(e=a.onLoadMaterials(e)),t.isValid(s.onLoadMaterials)&&(e=s.onLoadMaterials(e)),e},d=function(e){var i=!0;t.isValid(a.onReportError)&&(i=a.onReportError(r,e)),t.isValid(s.onReportError)&&(i=s.onReportError(r,e)),t.isValid(a.onReportError)||t.isValid(s.onReportError)||(console.error("Loader reported an error: "),console.error(e)),i&&(r.inUse=!1,o.processQueue())};r.loader=this._buildLoader(r.instanceNo);var h=new THREE.LoaderSupport.Callbacks;h.setCallbackOnLoad(i),h.setCallbackOnProgress(n),h.setCallbackOnReportError(d),h.setCallbackOnMeshAlter(l),h.setCallbackOnLoadMaterials(u),e.callbacks=h,r.loader.run(e,r.workerSupport)},_buildLoader:function(e){var r=this.workerDescription.classDef,t=Object.create(r.prototype);if(r.call(t,THREE.DefaultLoadingManager),!t.hasOwnProperty("instanceNo"))throw r.name+' has no property "instanceNo".';if(t.instanceNo=e,!t.hasOwnProperty("workerSupport"))throw r.name+' has no property "workerSupport".';if("function"!==typeof t.run)throw r.name+' has no function "run".';return t.hasOwnProperty("callbacks")&&THREE.LoaderSupport.Validator.isValid(t.callbacks)||(console.warn(r.name+' has an invalid property "callbacks". Will change to "THREE.LoaderSupport.Callbacks"'),t.callbacks=new THREE.LoaderSupport.Callbacks),t},_deregister:function(e){if(THREE.LoaderSupport.Validator.isValid(e)){e.workerSupport.setTerminateRequested(!0),this.logging.enabled&&console.info("Requested termination of worker #"+e.instanceNo+".");var r=e.loader.callbacks;THREE.LoaderSupport.Validator.isValid(r.onProgress)&&r.onProgress({detail:{text:""}}),delete this.workerDescription.workerSupports[e.instanceNo]}},tearDown:function(e){for(var r in this.logging.enabled&&console.info("WorkerDirector received the deregister call. Terminating all workers!"),this.instructionQueuePointer=this.instructionQueue.length,this.callbackOnFinishedProcessing=THREE.LoaderSupport.Validator.verifyInput(e,null),this.workerDescription.workerSupports)this.workerDescription.workerSupports[r].terminateRequested=!0}},module.exports={LoaderSupport:THREE.LoaderSupport}}}]);